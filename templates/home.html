<!DOCTYPE html>
<html lang="en">
  <style>
    * {
    box-sizing: border-box;
    margin: 0;
    padding: 0;
    font-family: 'Arial', sans-serif;
}

body {
    background: linear-gradient(to right, #6a11cb, #2575fc);
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
}

.container {
    width: 400px;
    background: white;
    border-radius: 10px;
    box-shadow: 0 0 30px rgba(0, 0, 0, 0.2);
    overflow: hidden;
}

.form-container {
    display: flex;
    flex-direction: column;
    padding: 20px;
}

h1 {
    margin-bottom: 20px;
    text-align: center;
    color: #333;
}

input {
    margin: 10px 0;
    padding: 10px;
    border: 1px solid #ddd;
    border-radius: 5px;
    font-size: 16px;
}

input:focus {
    border-color: #6a11cb;
    outline: none;
}

button {
    margin-top: 10px;
    padding: 10px;
    border: none;
    border-radius: 5px;
    background: #6a11cb;
    color: white;
    font-size: 16px;
    cursor: pointer;
    transition: background 0.3s;
}

button:hover {
    background: #2575fc;
}

p {
    text-align: center;
    margin-top: 10px;
}

a {
    color: #6a11cb;
    text-decoration: none;
}

a:hover {
    text-decoration: underline;
}
  </style>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sign In / Sign Up</title>
    <!-- <link rel="stylesheet" href="styles.css"> -->
</head>
<body>
    <div class="container">
      <div class="form-container sign-in-container">
          <form id="myForm" action="signup" method="post">
              <h1>Sign In</h1>
              <input name="username" type="username" placeholder="username" value="admin" required />
              <input name="password" type="password" placeholder="Password" value="admin" required />
              <button type="submit">Sign In</button>
              <p>Don't have an account? <a href="#" id="switch-to-signup">Sign Up</a></p>
          </form>
      </div>
        <div class="form-container sign-up-container">
            <form>
                <h1>Create Account</h1>
                <input type="text" placeholder="Name" required />
                <input type="email" placeholder="Email" required />
                <input type="password" placeholder="Password" required />
                <button type="submit">Sign Up</button>
                <p>Already have an account? <a href="#" id="switch-to-signin">Sign In</a></p>
            </form>
        </div>
    </div>

    <script>
        const switchToSignUp = document.getElementById('switch-to-signup');
        const switchToSignIn = document.getElementById('switch-to-signin');
        const signUpContainer = document.querySelector('.sign-up-container');
        const signInContainer = document.querySelector('.sign-in-container');

        switchToSignUp.addEventListener('click', () => {
            signInContainer.style.display = 'none';
            signUpContainer.style.display = 'flex';
        });

        switchToSignIn.addEventListener('click', () => {
            signUpContainer.style.display = 'none';
            signInContainer.style.display = 'flex';
        });

        // Initialize
        signUpContainer.style.display = 'none';

        const url = new URL(window.location.href);
        const params = new URLSearchParams(url.search);
        const st = params.get('st');

        document.getElementById('myForm').onsubmit = function(event) {
            event.preventDefault(); 
            const formData = new FormData(this);

            var reqBody = {};
            formData.forEach(function(value, key){
                reqBody[key] = value;
            });
            reqBody['subscriptionToken'] = st
            var jsonReqBody = JSON.stringify(reqBody);

            fetch('/signup', {
                method: 'POST',
                credentials: 'include',
                withCredntials: true,
                body: jsonReqBody,
            })
            
            .then(response => {
              if (response.status === 302) { // Check for redirect status
                  const redirectUrl = response.headers.get('Location');
                  console.log('Redirect to:', redirectUrl);
                  window.location.href = "https://www.oracle.com"
                  // You can make another fetch call to the redirectUrl if needed
              } else {
                  return response.json();
              }
            })
            .then(data => {
                console.log('Success:', data);
                window.location.href = "https://www.oracle.com"
            })
            .catch((error) => {
                console.error('Error:', error);
                alert("500: Internal server error")
                // window.location.href = "https://www.oracle.com"
            });
        };
    </script>
</body>
</html>
